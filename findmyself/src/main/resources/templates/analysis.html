<!--
=========================================================
* Argon Dashboard - v1.1.2
=========================================================
* Product Page: https://www.creative-tim.com/product/argon-dashboard
* Copyright 2020 Creative Tim (https://www.creative-tim.com)
* Licensed under MIT (https://github.com/creativetimofficial/argon-dashboard/blob/master/LICENSE.md)
* Coded by Creative Tim
=========================================================
* The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. -->
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>
        나혼자 찾는다 분석 결과
    </title>

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet">

    <!-- CSS Files -->
    <link href="/css/analysis/argon-dashboard.css?" rel="stylesheet" />
    <link rel="stylesheet" href="/css/header.css">
    <link rel="stylesheet" href="/css/footer.css">

    <script src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=b7fc83b99b816527f18b3bf2bce8208e&libraries=services"></script>
    <script src="http://code.jquery.com/jquery-latest.js"></script>
    <script src="https://apis.openapi.sk.com/tmap/jsv2?version=1&appKey=l7xx054e772885bf4fd6bff6bbf96c1884af"></script>
    <script type="text/javascript" src="/js/map.js"></script>
    <script type="text/javascript" src="/js/route.js"></script>
    <script type="text/javascript" src="/js/pubTransRoute.js"></script>
</head>

<body class="">
    <div class="header">
        <div class="logo-wrap">
            <a th:href="@{/}">
                <img src="/image/logo4.png">
            </a>
        </div>
    </div>

<div class="main-content">
    <div class="header bg-gradient-primary pt-5 pt-md-8">
    </div>
    <div class="container-fluid mt--7">
        <div class="row">
            <div class="col-xl-8 mb-5 mb-xl-0">
                <div class="card bg-gradient-default shadow">
                    <div class="card-header bg-transparent">
                        <div class="row align-items-center">
                            <div class="col">
                                <h6 class="text-uppercase text-muted ls-1 mb-1">서울특별시</h6>
                                <h2 class="text-darker mb-0" th:text="${gu} + ' '+ ${hdong}"></h2>
                            </div>
                            <div class="col">
                                <ul class="nav nav-pills justify-content-end">
                                    <li class="nav-item">
                                        <button class="btn btn-sm btn-primary" id="btn_select"
                                            style="font-size: 14px">자동차 경로 검색</button>
                                    </li>
                                    <li class="nav-item">
                                        <button class="btn btn-sm btn-primary" id="btn_select2"
                                                style="font-size: 14px">대중교통 경로 검색</button>
                                    </li>
                                    <li class="nav-item">
                                        <button class="btn btn-sm btn-primary" id="btn_select3" onclick="postCarRouteInfo(); getCarRouteInfo();"
                                                style="font-size: 14px">자동차 경로내 교통량 분석</button>
                                    </li>
                                    <li class="nav-item">
                                        <button class="btn btn-sm btn-primary" id="btn_select4" onclick="postStationInfo(); getStationInfo();"
                                                style="font-size: 14px">대중교통 경로내 교통량 분석</button>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <!--    <p class="hcode" th:text="'행정동코드: ' + ${hcode}"></p>-->
                    <div class="card-body">
                        <div id="map" style="height:500px;position:relative;overflow:inherit; border-radius: 10px">
                            <script th:inline="javascript">
                                var mapContainer = document.getElementById('map'), // 지도를 표시할 div
                                    mapOption = {
                                        center: new kakao.maps.LatLng(37.566826, 126.9786567), // 지도의 중심좌표
                                        level: 9 // 지도의 확대 레벨
                                    };

                                // 맵 초기화
                                var map = new kakao.maps.Map(mapContainer, mapOption),
                                    customOverlay = new kakao.maps.CustomOverlay({});

                                // 서울 전체 지도
                                DrawPolygon();

                                // 행정동 코드 가져오기
                                var hcode = [[${hcode}]];
                                //목적지
                                var dest = [[${addr}]];

                                //행정동 별 중심 위도, 경도
                                var center_x = [[${center_x}]];
                                var center_y = [[${center_y}]];

                                Draw_HangJungDong(hcode,dest,"#a5b6c9");

                                // 도착지점 지정
                                initDestSearch(center_x,center_y,dest);
                            </script>
                        </div><br>
<!--                        <h6 class="text-uppercase text-light ls-1 mb-1" style="font-size: medium" id="subwayResult"></h6>-->
                        <h6 class="text-uppercase text-light ls-1 mb-1" style="font-size: medium" id="subwayTest"></h6>
                    </div>
                </div>
            </div>
            <div class="col-xl-4" id="detail-analysis-wrap">
                <div class="card shadow">
                    <div class="card-header bg-transparent">
                        <div class="row align-items-center">
                            <div class="col">
                                <h6 class="text-uppercase text-muted ls-1 mb-1" th:text="${gu} + ' '+ ${hdong}"></h6>
                                <h2 class="mb-0">상세 분석</h2>
                            </div>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="col-xl-3 col-lg-6">
                            <div class="card card-stats mb-4 mb-xl-0">
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col">
                                            <h5 class="card-title text-uppercase text-muted mb-0">평균시세</h5>
                                            <span class="h2 font-weight-bold mb-0">350,897</span>
                                        </div>
                                        <div class="col-auto">
                                            <div class="icon icon-shape bg-danger text-white rounded-circle shadow">
                                                <i class="fas fa-chart-bar"></i>
                                            </div>
                                        </div>
                                    </div>
                                    <p class="mt-3 mb-0 text-muted text-sm">
                                        <span class="text-success mr-2"><i class="fa fa-arrow-up"></i> 3.48%</span>
                                        <span class="text-nowrap">Since last month</span>
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div class="col-xl-3 col-lg-6">
                            <div class="card card-stats mb-4 mb-xl-0">
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col">
                                            <h5 class="card-title text-uppercase text-muted mb-0">교통량</h5>
                                            <span class="h2 font-weight-bold mb-0">2,356</span>
                                        </div>
                                        <div class="col-auto">
                                            <div class="icon icon-shape bg-warning text-white rounded-circle shadow">
                                                <i class="fas fa-chart-pie"></i>
                                            </div>
                                        </div>
                                    </div>
                                    <p class="mt-3 mb-0 text-muted text-sm">
                                        <span class="text-danger mr-2"><i class="fas fa-arrow-down"></i> 3.48%</span>
                                        <span class="text-nowrap">Since last week</span>
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div class="col-xl-3 col-lg-6">
                            <div class="card card-stats mb-4 mb-xl-0">
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col">
                                            <h5 class="card-title text-uppercase text-muted mb-0">안전</h5>
                                            <span class="h2 font-weight-bold mb-0">924</span>
                                        </div>
                                        <div class="col-auto">
                                            <div class="icon icon-shape bg-yellow text-white rounded-circle shadow">
                                                <i class="fas fa-users"></i>
                                            </div>
                                        </div>
                                    </div>
                                    <p class="mt-3 mb-0 text-muted text-sm">
                                        <span class="text-warning mr-2"><i class="fas fa-arrow-down"></i> 1.10%</span>
                                        <span class="text-nowrap">Since yesterday</span>
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div class="col-xl-3 col-lg-6">
                            <div class="card card-stats mb-4 mb-xl-0">
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col">
                                            <h5 class="card-title text-uppercase text-muted mb-0">남녀비율</h5>
                                            <span class="h2 font-weight-bold mb-0">924</span>
                                        </div>
                                        <div class="col-auto">
                                            <div class="icon icon-shape bg-yellow text-white rounded-circle shadow">
                                                <i class="fas fa-users"></i>
                                            </div>
                                        </div>
                                    </div>
                                    <p class="mt-3 mb-0 text-muted text-sm">
                                        <span class="text-warning mr-2"><i class="fas fa-arrow-down"></i> 1.10%</span>
                                        <span class="text-nowrap">Since yesterday</span>
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div class="col-xl-3 col-lg-6">
                            <div class="card card-stats mb-4 mb-xl-0">
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col">
                                            <h5 class="card-title text-uppercase text-muted mb-0">남녀비율</h5>
                                            <span class="h2 font-weight-bold mb-0">924</span>
                                        </div>
                                        <div class="col-auto">
                                            <div class="icon icon-shape bg-yellow text-white rounded-circle shadow">
                                                <i class="fas fa-users"></i>
                                            </div>
                                        </div>
                                    </div>
                                    <p class="mt-3 mb-0 text-muted text-sm">
                                        <span class="text-warning mr-2"><i class="fas fa-arrow-down"></i> 1.10%</span>
                                        <span class="text-nowrap">Since yesterday</span>
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div class="col-xl-3 col-lg-6">
                            <div class="card card-stats mb-4 mb-xl-0">
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col">
                                            <h5 class="card-title text-uppercase text-muted mb-0">거주연령</h5>
                                            <span class="h2 font-weight-bold mb-0">924</span>
                                        </div>
                                        <div class="col-auto">
                                            <div class="icon icon-shape bg-yellow text-white rounded-circle shadow">
                                                <i class="fas fa-users"></i>
                                            </div>
                                        </div>
                                    </div>
                                    <p class="mt-3 mb-0 text-muted text-sm">
                                        <span class="text-warning mr-2"><i class="fas fa-arrow-down"></i> 1.10%</span>
                                        <span class="text-nowrap">Since yesterday</span>
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row mt-5">
            <div class="col-xl-8 mb-5 mb-xl-0">
                <div class="card shadow">
                    <div class="card-header border-0">
                        <div class="row align-items-center">
                            <div class="col">
                                <h2 class="mb-0">추천 동네</h2>
                            </div>
                            <div class="col text-right">
                                <a href="#!" class="btn btn-sm btn-primary">See all</a>
                            </div>
                        </div>
                    </div>
                    <div class="table-responsive">
                        <!-- Projects table -->
                        <table class="table align-items-center table-flush">
                            <thead class="thead-light">
                            <tr>
                                <th scope="col">학교/직장과 가까운</th>
                                <th scope="col"></th>
                                <th scope="col"></th>
                                <th scope="col"></th>
                            </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td id="disTop1"></td>
                                    <td id="disTop2"></td>
                                    <td id="disTop3"></td>
                                    <td id="disTop4"></td>
                                </tr>
                            </tbody>
                        </table>
                        <table class="table align-items-center table-flush">
                            <thead class="thead-light">
                            <tr>
                                <th scope="col">개인 맞춤형 추천</th>
                                <th scope="col"></th>
                                <th scope="col"></th>
                                <th scope="col"></th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td>oo동</td>
                                <td>oo동</td>
                                <td>oo동</td>
                                <td>oo동</td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="col-xl-4">
                <div class="card shadow">
                    <div class="card-header border-0">
                        <div class="row align-items-center">
                            <div class="col">
                                <h2 class="mb-0">여긴 뭐하지?</h2>
                            </div>
                            <div class="col text-right">
                                <a href="#!" class="btn btn-sm btn-primary">See all</a>
                            </div>
                        </div>
                    </div>
                    <div class="table-responsive">
                        <!-- Projects table -->
                        <table class="table align-items-center table-flush">
                            <thead class="thead-light">
                            <tr>
                                <th scope="col">Referral</th>
                                <th scope="col">Visitors</th>
                                <th scope="col"></th>
                            </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <th scope="row">
                                        Facebook
                                    </th>
                                    <td>
                                        1,480
                                    </td>
                                    <td>
                                        <div class="d-flex align-items-center">
                                            <span class="mr-2">60%</span>
                                            <div>
                                                <div class="progress">
                                                    <div class="progress-bar bg-gradient-danger" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 60%;"></div>
                                                </div>
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
    <div class="copyright">
        Copyright © by FindMyself 2021, Inc. All rights reserved
    </div>
    <script th:inline="javascript">
        function postStationInfo() {
            console.log(subwayStationResults);
            $('.sub_Result').val(subwayStationResults);
            $.ajax({
                type : "POST",
                url : "/mapAnalysis2",
                data : $("#postStationForm").serialize(),
                error : function(error) {
                    console.log("error");
                },
                success : function(data) {
                    console.log("success");

                }
            });
        }

        function  getStationInfo() {
            setTimeout(function () {
                $.ajax({
                    type : "GET",
                    url : "/mapAnalysis3",
                    error : function(error) {
                        console.log("error");
                    },
                    success : function(data) {
                        console.log("success");
                        stationInfo = data;
                        summarizePubResult();
                    }
                });
            }, 300);
        }

        function postCarRouteInfo() {
            $('.car_Result').val(carLocationResults);
            $.ajax({
                type : "POST",
                url : "/mapAnalysis4",
                data : $("#postCarRouteForm").serialize(),
                error : function(error) {
                    console.log("error");
                },
                success : function(data) {
                    console.log("success");

                }
            });
        }

        function  getCarRouteInfo() {
            setTimeout(function () {
                $.ajax({
                    type : "GET",
                    url : "/mapAnalysis5",
                    error : function(error) {
                        console.log("error");
                    },
                    success : function(data) {
                        console.log("success");
                        carInfo = data;
                        summarizeCarResult();
                    }
                });
            }, 300);
        }

        /*<![CDATA[*/
        var topDisInfoList = /*[[ ${topDisInfoList} ]]*/;
        /*]]*/
        loadDisTopList();
        function loadDisTopList(){
            if(topDisInfoList != null) {
                document.getElementById("disTop1").innerText = topDisInfoList[0].gu+" "+topDisInfoList[0].h_dong;
                document.getElementById("disTop2").innerText = topDisInfoList[1].gu+" "+topDisInfoList[1].h_dong;
                document.getElementById("disTop3").innerText = topDisInfoList[2].gu+" "+topDisInfoList[2].h_dong;
                document.getElementById("disTop4").innerText = topDisInfoList[3].gu+" "+topDisInfoList[3].h_dong;
            }
        }
    </script>
    <form id="postStationForm" name="postStationForm">
        <input class="sub_Result" id="sub_Result" name="sub_Result" type="hidden">
    </form>
    <form id="postCarRouteForm" name="postCarRouteForm">
        <input class="car_Result" id="car_Result" name="car_Result" type="hidden">
    </form>
</body>
</html>